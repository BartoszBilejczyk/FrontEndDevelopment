!function(t){var e=t.Effeckt,s=function(){return this instanceof s?void this.init():new s};s.version="0.0.1",s.prototype.init=function(){this.$body=$("body"),this.$element=null,this.$overlay=null,this.isShown=!1,this.hasPerspective=!1,this.modalEffeckt="",this.modalEffecktOut="",this.modalEffecktProvided=!0,this.bindUIActions()},s.prototype.bindUIActions=function(){$(document).on(e.buttonPressedEvent,".effeckt-modal-button",$.proxy(this.open,this)),$(document).on(e.buttonPressedEvent,'.effeckt-modal-close, [data-effeckt-dismiss="modal"]',$.proxy(this.close,this));var s=this;$(t).on("keyup",function(t){27===t.keyCode&&s.close(t)})},s.prototype.open=function(t){if(t.preventDefault(),!this.isShown){var s=$(t.target),i=s.data("effeckt-target");this.$element=$(i||"#effeckt-modal-wrap"),this.$element.length&&(this.modalEffeckt=s.data("effeckt-type"),this.modalEffecktOut=s.data("effeckt-out-type"),s.data("effeckt-needs-perspective")&&(this.$body.addClass("effeckt-perspective"),this.hasPerspective=!0),this.$element.hasClass(this.modalEffeckt)||void 0===this.modalEffeckt?this.showModal():(this.modalEffecktProvided=!1,this.$element.addClass(this.modalEffeckt),this.$element.on(e.transitionAnimationEndEvent,$.proxy(function(){this.$element.off(e.transitionAnimationEndEvent),this.showModal()},this))))}},s.prototype.close=function(t){t.preventDefault(),this.isShown&&(this.$element.on(e.transitionAnimationEndEvent,$.proxy(function(){this.$element.off(e.transitionAnimationEndEvent),this.hideModal()},this)),this.$element.removeClass("effeckt-show"),this.isShown=!1,this.modalEffecktOut&&this.$element.addClass(this.modalEffecktOut))},s.prototype.showModal=function(){this.addOverlay(),this.$element.addClass("effeckt-show"),this.isShown=!0},s.prototype.hideModal=function(){this.modalEffecktOut&&(this.$element.removeClass(this.modalEffecktOut),this.modalEffecktOut=""),this.hasPerspective&&(this.$body.removeClass("effeckt-perspective"),this.hasPerspective=!1),this.removeOverlay(),this.$element.removeClass(this.modalEffeckt),this.modalEffeckt=""},s.prototype.addOverlay=function(){var t=[];t.push('class="effeckt-overlay effeckt-modal-overlay"'),t.push('id="effeckt-modal-overlay"'),t.push('data-effeckt-dismiss="modal"'),this.$overlay=$("<div "+t.join(" ")+" />").insertAfter(this.$element),this.$overlay[0].offsetWidth},s.prototype.removeOverlay=function(){this.$overlay.remove(),this.$overlay=null},t.Effeckt.Modal=s()}(this);
