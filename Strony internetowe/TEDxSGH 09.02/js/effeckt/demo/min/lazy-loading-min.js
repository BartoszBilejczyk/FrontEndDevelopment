var EffecktLazyLoading={init:function(){var e=this;this.bindUIActions(),this.elements=$(".effeckt-lazy-loading-element"),this.wrapper=$(".effeckt-lazy-loading"),this.needsPerspective=!!this.wrapper.data("effeckt-needs-perspective"),this.viewportHeight=this.getViewportHeight(),this.elements.each(function(t,i){e.isElementVisible(i)&&$(i).addClass("shown")})},bindUIActions:function(){var e=this;$(".effeckt-page-active").on("scroll",function(){e._onScrollMethod()}),$(window).on("resize",function(){e.viewportHeight=e.getViewportHeight()}),$(".effeckt-lazy-loading-options input[type=radio]").on("click",function(){e.wrapper.attr("data-effeckt-type",$(this).val())})},_scrollPage:function(){var e=this;if(this.didScroll=!1,e.needsPerspective){var t=$(".effeckt-page-active").scrollTop()+e.viewportHeight/2;$(".effeckt-lazy-loading").css(Modernizr.prefixed("perspectiveOrigin"),"50% "+t+"px")}this.elements.each(function(t,i){$(i).hasClass("shown")||$(i).hasClass("animating")||!e.isElementVisible(i)||($(i).on(Effeckt.transitionAnimationEndEvent,function(){$(i).off(Effeckt.transitionAnimationEndEvent),$(i).removeClass("animating")}),$(i).addClass("shown animating"))})},isElementVisible:function(e){var t=e.offsetHeight,i=$(".effeckt-page-active").scrollTop(),n=i+this.viewportHeight,o=$(e).offset().top,s=o+t,a=.75;return n>=o+t*a+i},getViewportHeight:function(){var e=document.documentElement,t=e.clientHeight,i=window.innerHeight;return i>t?i:t},_onScrollMethod:function(){var e=this;this.didScroll||(this.didScroll=!0,setTimeout(function(){e._scrollPage()},1e3/60))}};EffecktLazyLoading.init();
